Creating the geometry and mesh for a computational fluid dynamics simulation of flow over a vehicle involves several key steps. First, the geometry of the vehicle needs to be imported into the CFD preprocessing software, CFX-Pre. The geometry can be imported from a CAD file in a format such as IGES or STEP. It is necessary to inspect the geometry and make any repairs to surfaces or gaps as needed. The geometry is then scoped to isolate the fluid domain, which is the region where the flow simulation will be solved. This is done by creating surfaces to define the fluid domainâ€”for example, surfaces for the ground, sides, top, inlet, outlet, and vehicle surface. These surfaces enclose the fluid volume and are used to generate the mesh within this volume. 

The next step is to specify the mesh spacing by defining mesh size controls. Fine mesh spacing is required in areas where there are large flow gradients, such as the boundary layer immediately next to the vehicle surface. Coarser mesh can be specified in areas where the flow gradients are smaller, such as further from the vehicle and in the wake. The mesh spacing controls can be defined using either physics-based sizing functions that vary the mesh based on flow gradients, or by manual specification of mesh element sizes in key regions. The mesh spacing should be optimized to provide sufficient resolution to properly capture important flow features while limiting the total mesh cell count to what is feasible to run on available computational resources.

An important aspect of the mesh for external aerodynamics simulations is the inclusion of prism layers, also known as inflated layers. These are 3D elements extruded from the surface to capture the boundary layer flow. Prism layers require specification of the number of layers, the stretching ratio between layers, and the total thickness. They should extend into the boundary layer to a thickness at least equal to the expected boundary layer thickness. The first layer height should be small enough, on the order of 0.001 mm in many cases, to properly capture the flow immediately at the wall including the laminar to turbulent transition.

The mesh is then generated within CFX-Pre based on all the inputs including geometry, domain surfaces, mesh spacing controls, and prism layer definitions. The mesh should be checked to ensure it captures all geometry features with sufficient resolution and quality. The mesh metrics check can identify any poor quality elements that may need fixing. The mesh can then be exported for running in the CFD solver, CFX.

In CFX, the physics models including fluid properties, turbulence models, and wall functions are applied. Boundary conditions are set for the inlet, outlet, wall, and any symmetry planes. The case is then run until it converges, and the results are exported back to CFX-Pre.

In CFX-Post, the postprocessor, results such as velocity profiles, pressure contours, and surface parameters can be plotted and visualized. These results should be checked for expected flow features to confirm the validity of the solution. The surface parameters are especially important and include quantities such as pressure and friction distributions around the vehicle. Force and moment coefficients can also be calculated to determine drag and lift. The solution on the mesh can be inspected to confirm that boundary layers, separations, and wake regions are properly captured by the mesh. 

Multiple simulations may need to be run with increasing mesh resolution to demonstrate mesh convergence or ensure results are independent of the mesh. Sensitivity studies varying parameters such as inlet properties or turbulence models can also be conducted. The workflow from preprocessing to solution and postprocessing is then iterated as needed to optimize the simulation setup and explore the fluid flow.