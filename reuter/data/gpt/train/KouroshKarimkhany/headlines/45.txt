Apple reports $120m loss and warns of continued struggles